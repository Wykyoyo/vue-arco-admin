import{bw as fe,_ as R,e as d,a7 as F,az as _t,aB as ne,ak as He,al as Y,bx as Ze,by as je,l as O,M as St,bz as H,bA as bt,aS as Be,bB as wt,a as z,y as We,aD as D,aG as oe,bC as U,bD as Tt,bE as $e,aq as Mt,bF as Gt,bG as Ke,bH as qe,bI as At,bJ as Dt,bK as Ct,bL as Rt,ag as Qe,b5 as Ft,aA as Pt,bM as It,aQ as Lt,c as S,bN as Et,bO as xt,S as Ot,ae as Vt,ap as X,bP as kt,am as Nt,x as q,an as Yt,bQ as Ut,bR as Xt,aC as pe,f as zt,ad as Jt,bS as Ht,bb as Zt,aO as x,aE as jt,bT as ge,aK as et,bU as Bt,a8 as Wt,bV as $t,aN as Kt,bW as he,bX as tt,bY as qt,bp as rt,bo as at,aw as ie,av as Qt,br as er,bZ as tr,b_ as rr,b2 as ar,aF as nr,j as or,p as ir,h as sr,b$ as lr,c0 as ur,bn as cr,g as fr,c1 as pr,b3 as ve,as as gr,bf as hr,aV as nt,c2 as vr,bu as mr,bv as dr,c3 as yr}from"./installCanvasRenderer.39a68c64.js";import{a as _r,s as Sr,o as br,X as wr,b as Tr,c as Mr,h as Gr}from"./vendor.43089ac5.js";var Ar=1e-8;function me(o,t){return Math.abs(o-t)<Ar}function de(o,t,e){var r=0,a=o[0];if(!a)return!1;for(var n=1;n<o.length;n++){var i=o[n];r+=fe(a[0],a[1],i[0],i[1],t,e),a=i}var s=o[0];return(!me(a[0],s[0])||!me(a[1],s[1]))&&(r+=fe(a[0],a[1],s[0],s[1],t,e)),r!==0}var Dr=[];function Q(o,t){for(var e=0;e<o.length;e++)Y(o[e],o[e],t)}function ye(o,t,e,r){for(var a=0;a<o.length;a++){var n=o[a];r&&(n=r.project(n)),n&&isFinite(n[0])&&isFinite(n[1])&&(Ze(t,t,n),je(e,e,n))}}function Cr(o){for(var t=0,e=0,r=0,a=o.length,n=o[a-1][0],i=o[a-1][1],s=0;s<a;s++){var l=o[s][0],u=o[s][1],c=n*u-l*i;t+=c,e+=(n+l)*c,r+=(i+u)*c,n=l,i=u}return t?[e/t/3,r/t/3,t]:[o[0][0]||0,o[0][1]||0]}var ot=function(){function o(t){this.name=t}return o.prototype.setCenter=function(t){this._center=t},o.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},o}(),_e=function(){function o(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return o}(),Se=function(){function o(t){this.type="linestring",this.points=t}return o}(),it=function(o){R(t,o);function t(e,r,a){var n=o.call(this,e)||this;return n.type="geoJSON",n.geometries=r,n._center=a&&[a[0],a[1]],n}return t.prototype.calcCenter=function(){for(var e=this.geometries,r,a=0,n=0;n<e.length;n++){var i=e[n],s=i.exterior,l=s&&s.length;l>a&&(r=i,a=l)}if(r)return Cr(r.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(e){var r=this._rect;if(r&&!e)return r;var a=[1/0,1/0],n=[-1/0,-1/0],i=this.geometries;return d(i,function(s){s.type==="polygon"?ye(s.exterior,a,n,e):d(s.points,function(l){ye(l,a,n,e)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(n[0])&&isFinite(n[1])||(a[0]=a[1]=n[0]=n[1]=0),r=new F(a[0],a[1],n[0]-a[0],n[1]-a[1]),e||(this._rect=r),r},t.prototype.contain=function(e){var r=this.getBoundingRect(),a=this.geometries;if(!r.contain(e[0],e[1]))return!1;e:for(var n=0,i=a.length;n<i;n++){var s=a[n];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(de(l,e[0],e[1])){for(var c=0;c<(u?u.length:0);c++)if(de(u[c],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,r,a,n){var i=this.getBoundingRect(),s=i.width/i.height;a?n||(n=a/s):a=s*n;for(var l=new F(e,r,a,n),u=i.calculateTransform(l),c=this.geometries,f=0;f<c.length;f++){var g=c[f];g.type==="polygon"?(Q(g.exterior,u),d(g.interiors,function(p){Q(p,u)})):d(g.points,function(p){Q(p,u)})}i=this._rect,i.copy(l),this._center=[i.x+i.width/2,i.y+i.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var r=new t(e,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t}(ot),Rr=function(o){R(t,o);function t(e,r){var a=o.call(this,e)||this;return a.type="geoSVG",a._elOnlyForCalculate=r,a}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,r=e.getBoundingRect(),a=[r.x+r.width/2,r.y+r.height/2],n=_t(Dr),i=e;i&&!i.isGeoSVGGraphicRoot;)ne(n,i.getLocalTransform(),n),i=i.parent;return He(n,n),Y(a,a,n),a},t}(ot);function Fr(o){if(!o.UTF8Encoding)return o;var t=o,e=t.UTF8Scale;e==null&&(e=1024);var r=t.features;return d(r,function(a){var n=a.geometry,i=n.encodeOffsets,s=n.coordinates;if(!!i)switch(n.type){case"LineString":n.coordinates=st(s,i,e);break;case"Polygon":ee(s,i,e);break;case"MultiLineString":ee(s,i,e);break;case"MultiPolygon":d(s,function(l,u){return ee(l,i[u],e)})}}),t.UTF8Encoding=!1,t}function ee(o,t,e){for(var r=0;r<o.length;r++)o[r]=st(o[r],t[r],e)}function st(o,t,e){for(var r=[],a=t[0],n=t[1],i=0;i<o.length;i+=2){var s=o.charCodeAt(i)-64,l=o.charCodeAt(i+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=a,l+=n,a=s,n=l,r.push([s/e,l/e])}return r}function Pr(o,t){return o=Fr(o),O(St(o.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var r=e.properties,a=e.geometry,n=[];switch(a.type){case"Polygon":var i=a.coordinates;n.push(new _e(i[0],i.slice(1)));break;case"MultiPolygon":d(a.coordinates,function(l){l[0]&&n.push(new _e(l[0],l.slice(1)))});break;case"LineString":n.push(new Se([a.coordinates]));break;case"MultiLineString":n.push(new Se(a.coordinates))}var s=new it(r[t||"name"],n,r.cp);return s.properties=r,s})}var be=Y,Ir=function(o){R(t,o);function t(e){var r=o.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new H,r._rawTransformable=new H,r.name=e,r}return t.prototype.setBoundingRect=function(e,r,a,n){return this._rect=new F(e,r,a,n),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,r,a,n){this._transformTo(e,r,a,n),this._viewRect=new F(e,r,a,n)},t.prototype._transformTo=function(e,r,a,n){var i=this.getBoundingRect(),s=this._rawTransformable;s.transform=i.calculateTransform(new F(e,r,a,n));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(e){!e||(this._center=e,this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var r=this.zoomLimit;r&&(r.max!=null&&(e=Math.min(r.max,e)),r.min!=null&&(e=Math.max(r.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),r=e.x+e.width/2,a=e.y+e.height/2;return[r,a]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,a=this.getDefaultCenter(),n=this.getCenter(),i=this.getZoom();n=Y([],n,e),a=Y([],a,e),r.originX=n[0],r.originY=n[1],r.x=a[0]-n[0],r.y=a[1]-n[1],r.scaleX=r.scaleY=i,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,r=this._rawTransformable;r.parent=e,e.updateTransform(),r.updateTransform(),bt(this.transform||(this.transform=[]),r.transform||Be()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],He(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,r=this._roamTransformable,a=new H;return a.transform=r.transform,a.decomposeTransform(),{roam:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,r,a){var n=r?this._rawTransform:this.transform;return a=a||[],n?be(a,e,n):wt(a,e)},t.prototype.pointToData=function(e){var r=this.invTransform;return r?be([],e,r):[e[0],e[1]]},t.prototype.convertToPixel=function(e,r,a){var n=we(r);return n===this?n.dataToPoint(a):null},t.prototype.convertFromPixel=function(e,r,a){var n=we(r);return n===this?n.pointToData(a):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(H);function we(o){var t=o.seriesModel;return t?t.coordinateSystem:null}var lt=Ir;function ut(o){if(z(o)){var t=new DOMParser;o=t.parseFromString(o,"text/xml")}var e=o;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var te,B={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Te=We(B),W={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Me=We(W),Lr=function(){function o(){this._defs={},this._root=null}return o.prototype.parse=function(t,e){e=e||{};var r=ut(t);this._defsUsePending=[];var a=new D;this._root=a;var n=[],i=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||e.width),l=parseFloat(r.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),b(r,a,null,!0,!1);for(var u=r.firstChild;u;)this._parseNode(u,a,n,null,!1,!1),u=u.nextSibling;Or(this._defs,this._defsUsePending),this._defsUsePending=[];var c,f;if(i){var g=$(i);g.length>=4&&(c={x:parseFloat(g[0]||0),y:parseFloat(g[1]||0),width:parseFloat(g[2]),height:parseFloat(g[3])})}if(c&&s!=null&&l!=null&&(f=ft(c,{x:0,y:0,width:s,height:l}),!e.ignoreViewBox)){var p=a;a=new D,a.add(p),p.scaleX=p.scaleY=f.scale,p.x=f.x,p.y=f.y}return!e.ignoreRootClip&&s!=null&&l!=null&&a.setClipPath(new oe({shape:{x:0,y:0,width:s,height:l}})),{root:a,width:s,height:l,viewBoxRect:c,viewBoxTransform:f,named:n}},o.prototype._parseNode=function(t,e,r,a,n,i){var s=t.nodeName.toLowerCase(),l,u=a;if(s==="defs"&&(n=!0),s==="text"&&(i=!0),s==="defs"||s==="switch")l=e;else{if(!n){var c=te[s];if(c&&U(te,s)){l=c.call(this,t,e);var f=t.getAttribute("name");if(f){var g={name:f,namedFrom:null,svgNodeTagLower:s,el:l};r.push(g),s==="g"&&(u=g)}else a&&r.push({name:a.name,namedFrom:a,svgNodeTagLower:s,el:l});e.add(l)}}var p=Ge[s];if(p&&U(Ge,s)){var h=p.call(this,t),m=t.getAttribute("id");m&&(this._defs[m]=h)}}if(l&&l.isGroup)for(var v=t.firstChild;v;)v.nodeType===1?this._parseNode(v,l,r,u,n,i):v.nodeType===3&&i&&this._parseText(v,l),v=v.nextSibling},o.prototype._parseText=function(t,e){var r=new Tt({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});M(e,r),b(t,r,this._defsUsePending,!1,!1),Er(r,e);var a=r.style,n=a.fontSize;n&&n<9&&(a.fontSize=9,r.scaleX*=n/9,r.scaleY*=n/9);var i=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");a.font=i;var s=r.getBoundingRect();return this._textX+=s.width,e.add(r),r},o.internalField=function(){te={g:function(t,e){var r=new D;return M(e,r),b(t,r,this._defsUsePending,!1,!1),r},rect:function(t,e){var r=new oe;return M(e,r),b(t,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(t,e){var r=new $e;return M(e,r),b(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),r.silent=!0,r},line:function(t,e){var r=new Mt;return M(e,r),b(t,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(t,e){var r=new Gt;return M(e,r),b(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(t,e){var r=t.getAttribute("points"),a;r&&(a=Ce(r));var n=new Ke({shape:{points:a||[]},silent:!0});return M(e,n),b(t,n,this._defsUsePending,!1,!1),n},polyline:function(t,e){var r=t.getAttribute("points"),a;r&&(a=Ce(r));var n=new qe({shape:{points:a||[]},silent:!0});return M(e,n),b(t,n,this._defsUsePending,!1,!1),n},image:function(t,e){var r=new At;return M(e,r),b(t,r,this._defsUsePending,!1,!1),r.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),r.silent=!0,r},text:function(t,e){var r=t.getAttribute("x")||"0",a=t.getAttribute("y")||"0",n=t.getAttribute("dx")||"0",i=t.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(n),this._textY=parseFloat(a)+parseFloat(i);var s=new D;return M(e,s),b(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,e){var r=t.getAttribute("x"),a=t.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),a!=null&&(this._textY=parseFloat(a));var n=t.getAttribute("dx")||"0",i=t.getAttribute("dy")||"0",s=new D;return M(e,s),b(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(n),this._textY+=parseFloat(i),s},path:function(t,e){var r=t.getAttribute("d")||"",a=Dt(r);return M(e,a),b(t,a,this._defsUsePending,!1,!1),a.silent=!0,a}}}(),o}(),Ge={lineargradient:function(o){var t=parseInt(o.getAttribute("x1")||"0",10),e=parseInt(o.getAttribute("y1")||"0",10),r=parseInt(o.getAttribute("x2")||"10",10),a=parseInt(o.getAttribute("y2")||"0",10),n=new Ct(t,e,r,a);return Ae(o,n),De(o,n),n},radialgradient:function(o){var t=parseInt(o.getAttribute("cx")||"0",10),e=parseInt(o.getAttribute("cy")||"0",10),r=parseInt(o.getAttribute("r")||"0",10),a=new Rt(t,e,r);return Ae(o,a),De(o,a),a}};function Ae(o,t){var e=o.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(t.global=!0)}function De(o,t){for(var e=o.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var r=e.getAttribute("offset"),a=void 0;r&&r.indexOf("%")>0?a=parseInt(r,10)/100:r?a=parseFloat(r):a=0;var n={};ct(e,n,n);var i=n.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:a,color:i})}e=e.nextSibling}}function M(o,t){o&&o.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Qe(t.__inheritedStyle,o.__inheritedStyle))}function Ce(o){for(var t=$(o),e=[],r=0;r<t.length;r+=2){var a=parseFloat(t[r]),n=parseFloat(t[r+1]);e.push([a,n])}return e}function b(o,t,e,r,a){var n=t,i=n.__inheritedStyle=n.__inheritedStyle||{},s={};o.nodeType===1&&(Nr(o,t),ct(o,i,s),r||Yr(o,i,s)),n.style=n.style||{},i.fill!=null&&(n.style.fill=Re(n,"fill",i.fill,e)),i.stroke!=null&&(n.style.stroke=Re(n,"stroke",i.stroke,e)),d(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){i[l]!=null&&(n.style[l]=parseFloat(i[l]))}),d(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){i[l]!=null&&(n.style[l]=i[l])}),a&&(n.__selfStyle=s),i.lineDash&&(n.style.lineDash=O($(i.lineDash),function(l){return parseFloat(l)})),(i.visibility==="hidden"||i.visibility==="collapse")&&(n.invisible=!0),i.display==="none"&&(n.ignore=!0)}function Er(o,t){var e=t.__selfStyle;if(e){var r=e.textBaseline,a=r;!r||r==="auto"||r==="baseline"?a="alphabetic":r==="before-edge"||r==="text-before-edge"?a="top":r==="after-edge"||r==="text-after-edge"?a="bottom":(r==="central"||r==="mathematical")&&(a="middle"),o.style.textBaseline=a}var n=t.__inheritedStyle;if(n){var i=n.textAlign,s=i;i&&(i==="middle"&&(s="center"),o.style.textAlign=s)}}var xr=/^url\(\s*#(.*?)\)/;function Re(o,t,e,r){var a=e&&e.match(xr);if(a){var n=Ft(a[1]);r.push([o,t,n]);return}return e==="none"&&(e=null),e}function Or(o,t){for(var e=0;e<t.length;e++){var r=t[e];r[0].style[r[1]]=o[r[2]]}}var Vr=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function $(o){return o.match(Vr)||[]}var kr=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,re=Math.PI/180;function Nr(o,t){var e=o.getAttribute("transform");if(e){e=e.replace(/,/g," ");var r=[],a=null;e.replace(kr,function(f,g,p){return r.push(g,p),""});for(var n=r.length-1;n>0;n-=2){var i=r[n],s=r[n-1],l=$(i);switch(a=a||Be(),s){case"translate":Lt(a,a,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":It(a,a,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Pt(a,a,-parseFloat(l[0])*re);break;case"skewX":var u=Math.tan(parseFloat(l[0])*re);ne(a,[1,0,u,1,0,0],a);break;case"skewY":var c=Math.tan(parseFloat(l[0])*re);ne(a,[1,c,0,1,0,0],a);break;case"matrix":a[0]=parseFloat(l[0]),a[1]=parseFloat(l[1]),a[2]=parseFloat(l[2]),a[3]=parseFloat(l[3]),a[4]=parseFloat(l[4]),a[5]=parseFloat(l[5]);break}}t.setLocalTransform(a)}}var Fe=/([^\s:;]+)\s*:\s*([^:;]+)/g;function ct(o,t,e){var r=o.getAttribute("style");if(!!r){Fe.lastIndex=0;for(var a;(a=Fe.exec(r))!=null;){var n=a[1],i=U(B,n)?B[n]:null;i&&(t[i]=a[2]);var s=U(W,n)?W[n]:null;s&&(e[s]=a[2])}}}function Yr(o,t,e){for(var r=0;r<Te.length;r++){var a=Te[r],n=o.getAttribute(a);n!=null&&(t[B[a]]=n)}for(var r=0;r<Me.length;r++){var a=Me[r],n=o.getAttribute(a);n!=null&&(e[W[a]]=n)}}function ft(o,t){var e=t.width/o.width,r=t.height/o.height,a=Math.min(e,r);return{scale:a,x:-(o.x+o.width/2)*a+(t.x+t.width/2),y:-(o.y+o.height/2)*a+(t.y+t.height/2)}}function Ur(o,t){var e=new Lr;return e.parse(o,t)}var Xr=S(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),zr=function(){function o(t,e){this.type="geoSVG",this._usedGraphicMap=S(),this._freedGraphics=[],this._mapName=t,this._parsedXML=ut(e)}return o.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=Hr(t.named),r=e.regions,a=e.regionsMap;this._regions=r,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},o.prototype._buildGraphic=function(t){var e,r;try{e=t&&Ur(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=e.root,Et(r!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var a=new D;a.add(r),a.isGeoSVGGraphicRoot=!0;var n=e.width,i=e.height,s=e.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,f=void 0,g=void 0;if(n!=null?(u=0,f=n):s&&(u=s.x,f=s.width),i!=null?(c=0,g=i):s&&(c=s.y,g=s.height),u==null||c==null){var p=r.getBoundingRect();u==null&&(u=p.x,f=p.width),c==null&&(c=p.y,g=p.height)}l=this._boundingRect=new F(u,c,f,g)}if(s){var h=ft(s,l);r.scaleX=r.scaleY=h.scale,r.x=h.x,r.y=h.y}a.setClipPath(new oe({shape:l.plain()}));var m=[];return d(e.named,function(v){Xr.get(v.svgNodeTagLower)!=null&&(m.push(v),Jr(v.el))}),{root:a,boundingRect:l,named:m}},o.prototype.useGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,r),r)},o.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);r&&(e.removeKey(t),this._freedGraphics.push(r))},o}();function Jr(o){o.silent=!1,o.isGroup&&o.traverse(function(t){t.silent=!1})}function Hr(o){var t=[],e=S();return d(o,function(r){if(r.namedFrom==null){var a=new Rr(r.name,r.el);t.push(a),e.set(r.name,a)}}),{regions:t,regionsMap:e}}var se=[126,25],Pe="\u5357\u6D77\u8BF8\u5C9B",L=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var I=0;I<L.length;I++)for(var E=0;E<L[I].length;E++)L[I][E][0]/=10.5,L[I][E][1]/=-10.5/.75,L[I][E][0]+=se[0],L[I][E][1]+=se[1];function Zr(o,t){if(o==="china"){for(var e=0;e<t.length;e++)if(t[e].name===Pe)return;t.push(new it(Pe,O(L,function(r){return{type:"polygon",exterior:r}}),se))}}var jr={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function Br(o,t){if(o==="china"){var e=jr[t.name];if(e){var r=t.getCenter();r[0]+=e[0]/10.5,r[1]+=-e[1]/(10.5/.75),t.setCenter(r)}}}var Wr=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function $r(o,t){o==="china"&&t.name==="\u53F0\u6E7E"&&t.geometries.push({type:"polygon",exterior:Wr[0]})}var Kr="name",qr=function(){function o(t,e,r){this.type="geoJSON",this._parsedMap=S(),this._mapName=t,this._specialAreas=r,this._geoJSON=ea(e)}return o.prototype.load=function(t,e){e=e||Kr;var r=this._parsedMap.get(e);if(!r){var a=this._parseToRegions(e);r=this._parsedMap.set(e,{regions:a,boundingRect:Qr(a)})}var n=S(),i=[];return d(r.regions,function(s){var l=s.name;t&&U(t,l)&&(s=s.cloneShallow(l=t[l])),i.push(s),n.set(l,s)}),{regions:i,boundingRect:r.boundingRect||new F(0,0,0,0),regionsMap:n}},o.prototype._parseToRegions=function(t){var e=this._mapName,r=this._geoJSON,a;try{a=r?Pr(r,t):[]}catch(n){throw new Error(`Invalid geoJson format
`+n.message)}return Zr(e,a),d(a,function(n){var i=n.name;Br(e,n),$r(e,n);var s=this._specialAreas&&this._specialAreas[i];s&&n.transformTo(s.left,s.top,s.width,s.height)},this),a},o.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},o}();function Qr(o){for(var t,e=0;e<o.length;e++){var r=o[e].getBoundingRect();t=t||r.clone(),t.union(r)}return t}function ea(o){return z(o)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(o):new Function("return ("+o+");")():o}var N=S(),C={registerMap:function(o,t,e){if(t.svg){var r=new zr(o,t.svg);N.set(o,r)}else{var a=t.geoJson||t.geoJSON;a&&!t.features?e=t.specialAreas:a=t;var r=new qr(o,a,e);N.set(o,r)}},getGeoResource:function(o){return N.get(o)},getMapForUser:function(o){var t=N.get(o);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(o,t,e){var r=N.get(o);if(!!r)return r.load(t,e)}},ta={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},pt=["lng","lat"],gt=function(o){R(t,o);function t(e,r,a){var n=o.call(this,e)||this;n.dimensions=pt,n.type="geo",n._nameCoordMap=S(),n.map=r;var i=a.projection,s=C.load(r,a.nameMap,a.nameProperty),l=C.getGeoResource(r);n.resourceType=l?l.type:null;var u=n.regions=s.regions,c=ta[l.type];n._regionsMap=s.regionsMap,n.regions=s.regions,n.projection=i;var f;if(i)for(var g=0;g<u.length;g++){var p=u[g].getBoundingRect(i);f=f||p.clone(),f.union(p)}else f=s.boundingRect;return n.setBoundingRect(f.x,f.y,f.width,f.height),n.aspectScale=i?1:xt(a.aspectScale,c.aspectScale),n._invertLongitute=i?!1:c.invertLongitute,n}return t.prototype._transformTo=function(e,r,a,n){var i=this.getBoundingRect(),s=this._invertLongitute;i=i.clone(),s&&(i.y=-i.y-i.height);var l=this._rawTransformable;l.transform=i.calculateTransform(new F(e,r,a,n));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var r=this.regions,a=0;a<r.length;a++){var n=r[a];if(n.type==="geoJSON"&&n.contain(e))return r[a]}},t.prototype.addGeoCoord=function(e,r){this._nameCoordMap.set(e,r)},t.prototype.getGeoCoord=function(e){var r=this._regionsMap.get(e);return this._nameCoordMap.get(e)||r&&r.getCenter()},t.prototype.dataToPoint=function(e,r,a){if(z(e)&&(e=this.getGeoCoord(e)),e){var n=this.projection;return n&&(e=n.project(e)),e&&this.projectedToPoint(e)}},t.prototype.pointToData=function(e){var r=this.projection;return r&&(e=r.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return o.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,r,a){return o.prototype.dataToPoint.call(this,e,r,a)},t.prototype.convertToPixel=function(e,r,a){var n=Ie(r);return n===this?n.dataToPoint(a):null},t.prototype.convertFromPixel=function(e,r,a){var n=Ie(r);return n===this?n.pointToData(a):null},t}(lt);Vt(gt,lt);function Ie(o){var t=o.geoModel,e=o.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Ot).models[0]||{}).coordinateSystem:null}var Le=gt;function Ee(o,t){var e=o.get("boundingCoords");if(e!=null){var r=e[0],a=e[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(a[0])&&isFinite(a[1])){var n=this.projection;if(n){var i=r[0],s=r[1],l=a[0],u=a[1];r=[1/0,1/0],a=[-1/0,-1/0];var c=function(V,A,P,G){for(var k=P-V,yt=G-A,K=0;K<=100;K++){var ue=K/100,ce=n.project([V+k*ue,A+yt*ue]);Ze(r,r,ce),je(a,a,ce)}};c(i,s,l,s),c(l,s,l,u),c(l,u,i,u),c(i,u,l,s)}this.setBoundingRect(r[0],r[1],a[0]-r[0],a[1]-r[1])}}var f=this.getBoundingRect(),g=o.get("layoutCenter"),p=o.get("layoutSize"),h=t.getWidth(),m=t.getHeight(),v=f.width/f.height*this.aspectScale,y=!1,w,T;g&&p&&(w=[q(g[0],h),q(g[1],m)],T=q(p,Math.min(h,m)),!isNaN(w[0])&&!isNaN(w[1])&&!isNaN(T)&&(y=!0));var _;if(y)_={},v>1?(_.width=T,_.height=T/v):(_.height=T,_.width=T*v),_.y=w[1]-_.height/2,_.x=w[0]-_.width/2;else{var J=o.getBoxLayoutParams();J.aspect=v,_=Yt(J,{width:h,height:m})}this.setViewRect(_.x,_.y,_.width,_.height),this.setCenter(o.get("center")),this.setZoom(o.get("zoom"))}function ra(o,t){d(t.get("geoCoord"),function(e,r){o.addGeoCoord(r,e)})}var aa=function(){function o(){this.dimensions=pt}return o.prototype.create=function(t,e){var r=[];function a(i){return{nameProperty:i.get("nameProperty"),aspectScale:i.get("aspectScale"),projection:i.get("projection")}}t.eachComponent("geo",function(i,s){var l=i.get("map"),u=new Le(l+s,l,X({nameMap:i.get("nameMap")},a(i)));u.zoomLimit=i.get("scaleLimit"),r.push(u),i.coordinateSystem=u,u.model=i,u.resize=Ee,u.resize(i,e)}),t.eachSeries(function(i){var s=i.get("coordinateSystem");if(s==="geo"){var l=i.get("geoIndex")||0;i.coordinateSystem=r[l]}});var n={};return t.eachSeriesByType("map",function(i){if(!i.getHostGeoModel()){var s=i.getMapType();n[s]=n[s]||[],n[s].push(i)}}),d(n,function(i,s){var l=O(i,function(c){return c.get("nameMap")}),u=new Le(s,s,X({nameMap:kt(l)},a(i[0])));u.zoomLimit=Nt.apply(null,O(i,function(c){return c.get("scaleLimit")})),r.push(u),u.resize=Ee,u.resize(i[0],e),d(i,function(c){c.coordinateSystem=u,ra(u,c)})}),r},o.prototype.getFilledRegions=function(t,e,r,a){for(var n=(t||[]).slice(),i=S(),s=0;s<n.length;s++)i.set(n[s].name,n[s]);var l=C.load(e,r,a);return d(l.regions,function(u){var c=u.name;!i.get(c)&&n.push({name:c})}),n},o}(),na=new aa,ht=na,oa=function(o){R(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,r,a){var n=C.getGeoResource(e.map);if(n&&n.type==="geoJSON"){var i=e.itemStyle=e.itemStyle||{};"color"in i||(i.color="#eee")}this.mergeDefaultAndTheme(e,a),Ut(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,r=this.option;r.regions=ht.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var a={};this._optionModelMap=Xt(r.regions||[],function(n,i){var s=i.name;return s&&(n.set(s,new pe(i,e,e.ecModel)),i.selected&&(a[s]=!0)),n},S()),r.selectedMap||(r.selectedMap=a)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new pe(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,r){var a=this.getRegionModel(e),n=r==="normal"?a.get(["label","formatter"]):a.get(["emphasis","label","formatter"]),i={name:e};if(zt(n))return i.status=r,n(i);if(z(n))return n.replace("{a}",e!=null?e:"")},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var r=this.option,a=r.selectedMode;if(!!a){a!=="multiple"&&(r.selectedMap=null);var n=r.selectedMap||(r.selectedMap={});n[e]=!0}},t.prototype.unSelect=function(e){var r=this.option.selectedMap;r&&(r[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var r=this.option.selectedMap;return!!(r&&r[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Jt),ia=oa;function xe(o,t){return o.pointToProjected?o.pointToProjected(t):o.pointToData(t)}function sa(o,t,e){var r=o.getZoom(),a=o.getCenter(),n=t.zoom,i=o.projectedToPoint?o.projectedToPoint(a):o.dataToPoint(a);if(t.dx!=null&&t.dy!=null&&(i[0]-=t.dx,i[1]-=t.dy,o.setCenter(xe(o,i))),n!=null){if(e){var s=e.min||0,l=e.max||1/0;n=Math.max(Math.min(r*n,l),s)/r}o.scaleX*=n,o.scaleY*=n;var u=(t.originX-o.x)*(n-1),c=(t.originY-o.y)*(n-1);o.x-=u,o.y-=c,o.updateTransform(),o.setCenter(xe(o,i)),o.setZoom(n*r)}return{center:o.getCenter(),zoom:o.getZoom()}}var Oe="\0_ec_interaction_mutex";function Ve(o,t){return!!la(o)[t]}function la(o){return o[Oe]||(o[Oe]={})}Ht({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Zt);var ua=function(o){R(t,o);function t(e){var r=o.call(this)||this;r._zr=e;var a=x(r._mousedownHandler,r),n=x(r._mousemoveHandler,r),i=x(r._mouseupHandler,r),s=x(r._mousewheelHandler,r),l=x(r._pinchHandler,r);return r.enable=function(u,c){this.disable(),this._opt=Qe(jt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",a),e.on("mousemove",n),e.on("mouseup",i)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},r.disable=function(){e.off("mousedown",a),e.off("mousemove",n),e.off("mouseup",i),e.off("mousewheel",s),e.off("pinch",l)},r}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!(ge(e)||e.target&&e.target.draggable)){var r=e.offsetX,a=e.offsetY;this.pointerChecker&&this.pointerChecker(e,r,a)&&(this._x=r,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!j("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Ve(this._zr,"globalPan"))){var r=e.offsetX,a=e.offsetY,n=this._x,i=this._y,s=r-n,l=a-i;this._x=r,this._y=a,this._opt.preventDefaultMouseMove&&et(e.event),vt(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:n,oldY:i,newX:r,newY:a,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){ge(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var r=j("zoomOnMouseWheel",e,this._opt),a=j("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,i=Math.abs(n),s=e.offsetX,l=e.offsetY;if(!(n===0||!r&&!a)){if(r){var u=i>3?1.4:i>1?1.2:1.1,c=n>0?u:1/u;ae(this,"zoom","zoomOnMouseWheel",e,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(a){var f=Math.abs(n),g=(n>0?1:-1)*(f>3?.4:f>1?.15:.05);ae(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:g,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!Ve(this._zr,"globalPan")){var r=e.pinchScale>1?1.1:1/1.1;ae(this,"zoom",null,e,{scale:r,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t}(Bt);function ae(o,t,e,r,a){o.pointerChecker&&o.pointerChecker(r,a.originX,a.originY)&&(et(r.event),vt(o,t,e,r,a))}function vt(o,t,e,r,a){a.isAvailableBehavior=x(j,null,e,r),o.trigger(t,a)}function j(o,t,e){var r=e[o];return!o||r&&(!z(r)||t.event[r+"Key"])}var ca=ua;function fa(o,t,e){var r=o.target;r.x+=t,r.y+=e,r.dirty()}function pa(o,t,e,r){var a=o.target,n=o.zoomLimit,i=o.zoom=o.zoom||1;if(i*=t,n){var s=n.min||0,l=n.max||1/0;i=Math.max(Math.min(l,i),s)}var u=i/o.zoom;o.zoom=i,a.x-=(e-a.x)*(u-1),a.y-=(r-a.y)*(u-1),a.scaleX*=u,a.scaleY*=u,a.dirty()}var ga={axisPointer:1,tooltip:1,brush:1};function ha(o,t,e){var r=t.getComponentByElement(o.topTarget),a=r&&r.coordinateSystem;return r&&r!==e&&!ga.hasOwnProperty(r.mainType)&&a&&a.model!==e}var le=["rect","circle","line","ellipse","polygon","polyline","path"],va=S(le),ma=S(le.concat(["g"])),da=S(le.concat(["g"])),mt=Wt();function Z(o){var t=o.getItemStyle(),e=o.get("areaColor");return e!=null&&(t.fill=e),t}function ke(o){var t=o.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var ya=function(){function o(t){var e=new D;this.uid=$t("ec_map_draw"),this._controller=new ca(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new D),e.add(this._svgGroup=new D)}return o.prototype.draw=function(t,e,r,a,n){var i=t.mainType==="geo",s=t.getData&&t.getData();i&&e.eachComponent({mainType:"series",subType:"map"},function(y){!s&&y.getHostGeoModel()===t&&(s=y.getData())});var l=t.coordinateSystem,u=this._regionsGroup,c=this.group,f=l.getTransformInfo(),g=f.raw,p=f.roam,h=!u.childAt(0)||n;h?(c.x=p.x,c.y=p.y,c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.dirty()):Kt(c,p,t);var m=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,v={api:r,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:m,isGeo:i,transformInfoRaw:g};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(t,e,r),this._updateMapSelectHandler(t,u,r,a)},o.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=S(),r=S(),a=this._regionsGroup,n=t.transformInfoRaw,i=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function c(p,h){return h&&(p=h(p)),p&&[p[0]*n.scaleX+n.x,p[1]*n.scaleY+n.y]}function f(p){for(var h=[],m=!u&&l&&l.project,v=0;v<p.length;++v){var y=c(p[v],m);y&&h.push(y)}return h}function g(p){return{shape:{points:f(p)}}}a.removeAll(),d(t.geo.regions,function(p){var h=p.name,m=e.get(h),v=r.get(h)||{},y=v.dataIdx,w=v.regionModel;m||(m=e.set(h,new D),a.add(m),y=s?s.indexOfName(h):null,w=t.isGeo?i.getRegionModel(h):s?s.getItemModel(y):null,r.set(h,{dataIdx:y,regionModel:w}));var T=[],_=[];d(p.geometries,function(A){if(A.type==="polygon"){var P=[A.exterior].concat(A.interiors||[]);u&&(P=Je(P,u)),d(P,function(k){T.push(new Ke(g(k)))})}else{var G=A.points;u&&(G=Je(G,u,!0)),d(G,function(k){_.push(new qe(g(k)))})}});var J=c(p.getCenter(),l&&l.project);function V(A,P){if(!!A.length){var G=new rr({culling:!0,segmentIgnoreThreshold:1,shape:{paths:A}});m.add(G),Ne(t,G,y,w),Ye(t,G,h,w,i,y,J),P&&(ke(G),d(G.states,ke))}}V(T),V(_,!0)}),e.each(function(p,h){var m=r.get(h),v=m.dataIdx,y=m.regionModel;Ue(t,p,h,y,i,v),Xe(t,p,h,y,i),ze(t,p,h,y,i)},this)},o.prototype._buildSVG=function(t){var e=t.geo.map,r=t.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var a=this._svgDispatcherMap=S(),n=!1;d(this._svgGraphicRecord.named,function(i){var s=i.name,l=t.mapOrGeoModel,u=t.data,c=i.svgNodeTagLower,f=i.el,g=u?u.indexOfName(s):null,p=l.getRegionModel(s);if(va.get(c)!=null&&f instanceof he&&Ne(t,f,g,p),f instanceof he&&(f.culling=!0),f.z2EmphasisLift=0,!i.namedFrom&&(da.get(c)!=null&&Ye(t,f,s,p,l,g,null),Ue(t,f,s,p,l,g),Xe(t,f,s,p,l),ma.get(c)!=null)){var h=ze(t,f,s,p,l);h==="self"&&(n=!0);var m=a.get(s)||a.set(s,[]);m.push(f)}},this),this._enableBlurEntireSVG(n,t)},o.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var r=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),a=r.opacity;this._svgGraphicRecord.root.traverse(function(n){if(!n.isGroup){tt(n);var i=n.ensureState("blur").style||{};i.opacity==null&&a!=null&&(i.opacity=a),n.ensureState("emphasis")}})}},o.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},o.prototype.findHighDownDispatchers=function(t,e){if(t==null)return[];var r=e.coordinateSystem;if(r.resourceType==="geoJSON"){var a=this._regionsGroupByName;if(a){var n=a.get(t);return n?[n]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},o.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},o.prototype._useSVG=function(t){var e=C.getGeoResource(t);if(e&&e.type==="geoSVG"){var r=e.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=t}},o.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var e=C.getGeoResource(t);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},o.prototype._updateController=function(t,e,r){var a=t.coordinateSystem,n=this._controller,i=this._controllerHost;i.zoomLimit=t.get("scaleLimit"),i.zoom=a.getZoom(),n.enable(t.get("roam")||!1);var s=t.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=t.id,u}n.off("pan").on("pan",function(u){this._mouseDownFlag=!1,fa(i,u.dx,u.dy),r.dispatchAction(X(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),n.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,pa(i,u.scale,u.originX,u.originY),r.dispatchAction(X(l(),{zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),n.setPointerChecker(function(u,c,f){return a.containPoint([c,f])&&!ha(u,r,t)})},o.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=mt(e).ignore)})},o.prototype._updateMapSelectHandler=function(t,e,r,a){var n=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){n._mouseDownFlag=!0}),e.on("click",function(i){!n._mouseDownFlag||(n._mouseDownFlag=!1)}))},o}();function Ne(o,t,e,r){var a=r.getModel("itemStyle"),n=r.getModel(["emphasis","itemStyle"]),i=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=Z(a),u=Z(n),c=Z(s),f=Z(i),g=o.data;if(g){var p=g.getItemVisual(e,"style"),h=g.getItemVisual(e,"decal");o.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),h&&(l.decal=qt(h,o.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=f,tt(t)}function Ye(o,t,e,r,a,n,i){var s=o.data,l=o.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),n)),c=s&&s.getItemLayout(n);if(l||u||c&&c.showLabel){var f=l?e:n,g=void 0;(!s||n>=0)&&(g=a);var p=i?{normal:{align:"center",verticalAlign:"middle"}}:null;rt(t,at(r),{labelFetcher:g,labelDataIndex:f,defaultText:e},p);var h=t.getTextContent();if(h&&(mt(h).ignore=h.ignore,t.textConfig&&i)){var m=t.getBoundingRect().clone();t.textConfig.layoutRect=m,t.textConfig.position=[(i[0]-m.x)/m.width*100+"%",(i[1]-m.y)/m.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function Ue(o,t,e,r,a,n){o.data?o.data.setItemGraphicEl(n,t):ie(t).eventData={componentType:"geo",componentIndex:a.componentIndex,geoIndex:a.componentIndex,name:e,region:r&&r.option||{}}}function Xe(o,t,e,r,a){o.data||Qt({el:t,componentModel:a,itemName:e,itemTooltipOption:r.get("tooltip")})}function ze(o,t,e,r,a){t.highDownSilentOnTouch=!!a.get("selectedMode");var n=r.getModel("emphasis"),i=n.get("focus");return er(t,i,n.get("blurScope"),n.get("disabled")),o.isGeo&&tr(t,a,e),i}function Je(o,t,e){var r=[],a;function n(){a=[]}function i(){a.length&&(r.push(a),a=[])}var s=t({polygonStart:n,polygonEnd:i,lineStart:n,lineEnd:i,point:function(l,u){isFinite(l)&&isFinite(u)&&a.push([l,u])},sphere:function(){}});return!e&&s.polygonStart(),d(o,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!e&&s.polygonEnd(),r}var dt=ya,_a=function(o){R(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return t.prototype.init=function(e,r){this._api=r},t.prototype.render=function(e,r,a,n){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new dt(a));var i=this._mapDraw;i.draw(e,r,a,this,n),i.group.on("click",this._handleRegionClick,this),i.group.silent=e.get("silent"),this.group.add(i.group),this.updateSelectStatus(e,r,a)},t.prototype._handleRegionClick=function(e){var r;ar(e.target,function(a){return(r=ie(a).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},t.prototype.updateSelectStatus=function(e,r,a){var n=this;this._mapDraw.group.traverse(function(i){var s=ie(i).eventData;if(s)return n._model.isSelected(s.name)?a.enterSelect(i):a.leaveSelect(i),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(nr),Sa=_a;function ba(o,t,e){C.registerMap(o,t,e)}function wa(o){o.registerCoordinateSystem("geo",ht),o.registerComponentModel(ia),o.registerComponentView(Sa),o.registerImpl("registerMap",ba),o.registerImpl("getMap",function(e){return C.getMapForUser(e)});function t(e,r){r.update="geo:updateSelectStatus",o.registerAction(r,function(a,n){var i={},s=[];return n.eachComponent({mainType:"geo",query:a},function(l){l[e](a.name);var u=l.coordinateSystem;d(u.regions,function(f){i[f.name]=l.isSelected(f.name)||!1});var c=[];d(i,function(f,g){i[g]&&c.push(g)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:i,allSelected:s,name:a.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),o.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,r){var a=e.componentType||"series";r.eachComponent({mainType:a,query:e},function(n){var i=n.coordinateSystem;if(i.type==="geo"){var s=sa(i,e,n.get("scaleLimit"));n.setCenter&&n.setCenter(s.center),n.setZoom&&n.setZoom(s.zoom),a==="series"&&d(n.seriesGroup,function(l){l.setCenter(s.center),l.setZoom(s.zoom)})}})})}function Ta(o,t,e){t=or(t)&&{coordDimensions:t}||X({encodeDefine:o.getEncode()},t);var r=o.getSource(),a=ir(r,t).dimensions,n=new sr(a,o);return n.initData(r,e),n}var Ma=function(o){R(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,a,n){if(!(n&&n.type==="mapToggleSelect"&&n.from===this.uid)){var i=this.group;if(i.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&n&&n.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),n&&n.type==="geoRoam"&&n.componentType==="series"&&n.seriesId===e.id){var s=this._mapDraw;s&&i.add(s.group)}else if(e.needsDrawMap){var s=this._mapDraw||new dt(a);i.add(s.group),s.draw(e,r,a,this,n),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(e,r,a)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,r,a){var n=e.originalData,i=this.group;n.each(n.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=n.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,f=u.offset,g=new $e({style:{fill:e.getData().getVisual("style").fill},shape:{cx:c[0]+f*9,cy:c[1],r:3},silent:!0,z2:8+(f?0:lr+1)});if(!f){var p=e.mainSeries.getData(),h=n.getName(l),m=p.indexOfName(h),v=n.getItemModel(l),y=v.getModel("label"),w=p.getItemGraphicEl(m);rt(g,at(v),{labelFetcher:{getFormattedLabel:function(T,_){return e.getFormattedLabel(m,_)}},defaultText:h}),g.disableLabelAnimation=!0,y.get("position")||g.setTextConfig({position:"bottom"}),w.onHoverStateChange=function(T){ur(g,T)}}i.add(g)}}})},t.type="map",t}(cr),Ga=Ma,Aa=function(o){R(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(r){if(r!=null){var a=this.getData().getName(r),n=this.coordinateSystem,i=n.getRegion(a);return i&&n.dataToPoint(i.getCenter())}},e}return t.prototype.getInitialData=function(e){for(var r=Ta(this,{coordDimensions:["value"],encodeDefaulter:fr(pr,this)}),a=S(),n=[],i=0,s=r.count();i<s;i++){var l=r.getName(i);a.set(l,!0)}var u=C.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return d(u.regions,function(c){var f=c.name;a.get(f)||n.push(f)}),r.appendValues([],n),r},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var r=this.getData();return r.get(r.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var r=this.getData();return r.getItemModel(r.indexOfName(e))},t.prototype.formatTooltip=function(e,r,a){for(var n=this.getData(),i=this.getRawValue(e),s=n.getName(e),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var f=l[c].originalData.indexOfName(s),g=n.mapDimension("value");isNaN(l[c].originalData.get(g,f))||u.push(l[c].name)}return ve("section",{header:u.join(", "),noHeader:!u.length,blocks:[ve("nameValue",{name:s,value:i})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var r=e.icon||"roundRect",a=gr(r,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return a.setStyle(e.itemStyle),a.style.stroke="none",r.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(hr),Da=Aa;function Ca(o,t){var e={};return d(o,function(r){r.each(r.mapDimension("value"),function(a,n){var i="ec-"+r.getName(n);e[i]=e[i]||[],isNaN(a)||e[i].push(a)})}),o[0].map(o[0].mapDimension("value"),function(r,a){for(var n="ec-"+o[0].getName(a),i=0,s=1/0,l=-1/0,u=e[n].length,c=0;c<u;c++)s=Math.min(s,e[n][c]),l=Math.max(l,e[n][c]),i+=e[n][c];var f;return t==="min"?f=s:t==="max"?f=l:t==="average"?f=i/u:f=i,u===0?NaN:f})}function Ra(o){var t={};o.eachSeriesByType("map",function(e){var r=e.getHostGeoModel(),a=r?"o"+r.id:"i"+e.getMapType();(t[a]=t[a]||[]).push(e)}),d(t,function(e,r){for(var a=Ca(O(e,function(i){return i.getData()}),e[0].get("mapValueCalculation")),n=0;n<e.length;n++)e[n].originalData=e[n].getData();for(var n=0;n<e.length;n++)e[n].seriesGroup=e,e[n].needsDrawMap=n===0&&!e[n].getHostGeoModel(),e[n].setData(a.cloneShallow()),e[n].mainSeries=e[0]})}function Fa(o){var t={};o.eachSeriesByType("map",function(e){var r=e.getMapType();if(!(e.getHostGeoModel()||t[r])){var a={};d(e.seriesGroup,function(i){var s=i.coordinateSystem,l=i.originalData;i.get("showLegendSymbol")&&o.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var f=l.getName(c),g=s.getRegion(f);if(!(!g||isNaN(u))){var p=a[f]||0,h=s.dataToPoint(g.getCenter());a[f]=p+1,l.setItemLayout(c,{point:h,offset:p})}})});var n=e.getData();n.each(function(i){var s=n.getName(i),l=n.getItemLayout(i)||{};l.showLabel=!a[s],n.setItemLayout(i,l)}),t[r]=!0}})}function Pa(o){nt(wa),o.registerChartView(Ga),o.registerSeriesModel(Da),o.registerLayout(Fa),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,Ra),vr("map",o.registerAction)}const Ia=()=>{const t="https://webapi.amap.com/maps?v=2.0&key=ce43a1e5df3f8b63809288fd8eba34ad&callback=onAMapCallback";return new Promise((e,r)=>{if(typeof AMap!="undefined")return e(AMap),!0;window.onAMapCallback=()=>{e(AMap)};const a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",t),a.onerror=r,document.body.appendChild(a)})},La=()=>new Promise((o,t)=>{Ia().then(()=>{if(typeof AMapUI!="undefined")return o(""),!0;const e="https://webapi.amap.com/ui/1.1/main.js?v=1.1.1",r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",e),r.onerror=t,r.onload=a=>{o("")},document.body.appendChild(r)}).catch(e=>{t(e)})}),Ea=(o,t)=>new Promise((e,r)=>{La().then(()=>{const a=(n,i)=>{AMapUI.loadUI(["geo/DistrictExplorer"],s=>{new s().loadAreaNode(n,(u,c)=>{if(u){r(u);return}let f=c.getSubFeatures();if(f.length===0){const p=c._data.geoData.parent.properties.acroutes;a(p[p.length-1],n);return}i&&(f=f.filter(p=>p.properties.adcode===i)),e({features:f})})})};a(o,t)})}),xa={class:"h-full px-0 py-0"},Oa=Gr("div",{id:"map_echar",class:"w-full h-full"},null,-1),Va=[Oa],Ya=_r({setup(o){nt([Pa,mr]);const t=Sr({geoJson:null}),e=()=>{const a=document.getElementById("map_echar");if(a){const n=dr(a);yr("map",t.geoJson);const i="map",s={geo:{map:i,zoom:1,roam:!0,animation:!1,itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(147, 235, 248, 1)"},{offset:1,color:"rgba(2, 99, 206, 1)"}],globalCoord:!1},shadowColor:"#105781",shadowOffsetX:0,shadowOffsetY:10}},series:[{name:"map",type:"map",map:i,selectedMode:!1,roam:!0,label:{show:!0,color:"#000a3c"},animation:!1,zlevel:1,itemStyle:{areaColor:{type:"radial",x:.5,y:.5,r:3,colorStops:[{offset:0,color:"rgba(223, 231, 242, 1)"},{offset:1,color:"rgba(2, 99, 206, 1)"}]},borderWidth:1,borderColor:"rgba(104, 152, 190, 1)",shadowColor:"rgba(128, 217, 248, 1)",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10},emphasis:{label:{color:"#ffffff"},itemStyle:{areaColor:"#a5d4fe"}}}]};n.setOption(s),n.on("georoam",l=>{const u=n.getOption();l.zoom!=null&&l.zoom!==void 0&&(u.geo[0].zoom=u.series[0].zoom),u.geo[0].center=u.series[0].center,n.setOption(u)})}},r=()=>{Ea(1e5).then(a=>{t.geoJson=a,e()})};return br(()=>{wr(()=>{r()})}),(a,n)=>(Tr(),Mr("div",xa,Va))}});export{Ya as default};
