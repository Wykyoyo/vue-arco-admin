import{g as v}from"./utils.25ddbb72.js";import{a as k}from"./axios.5f3831c9.js";import{u as y,e as M,f as A,c as D,a as N,g as w,i as S,d as $,r as z}from"./echarts.84531849.js";import{f as J,a as I,a9 as O,o as G,z as T,h as V,j as l,k as m,p as b,F as L,O as R,ae as _,y as W,L as j,t as U}from"./@vue.d477cf44.js";import"./axios.b6599a80.js";import"./index.f3a79496.js";import"./pinia.9be849ee.js";import"./vue-router.204f1d53.js";import"./@arco-design.668f5a6a.js";import"./b-validate.394bfa7b.js";import"./resize-observer-polyfill.8deb1e21.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./number-precision.08b8c2db.js";import"./lodash-es.2f4ef74c.js";import"./tslib.60310f1a.js";import"./zrender.07183df1.js";const X=i=>k.post("/home/getMapData",i);const Y={class:"h-full px-0 py-0"},q={class:"absolute flex z-2 px-10px py-10px"},H=["onClick"],K={key:0,class:"mx-4px"},P=b("div",{id:"map_echar",class:"w-full h-full"},null,-1),he=J({setup(i){y([M,A,D,N,w,S]);const r=I({geoJson:null,mapData:[],enterMap:[{name:"\u5168\u56FD",adcode:1e5}]}),d=O({echarts:[]}),E=(t,e,s,o)=>{const a=document.getElementById("map_echar");if(a){const c=$(a);d.echarts.push(c),z("map",r.geoJson);const u="map",B={grid:{left:"0%",top:"0%",right:"0%",bottom:"0%"},tooltip:{trigger:"item",formatter:n=>{var h,F;return`
                        <div class="map_tooltip">
                            <div class="map_tooltip_content_item">
                                <span class="content_item_point" style="color:#1AFFBF;">\u25CF</span>
                                <span class="content_item_name">\u6B63\u5E38\u6570\u636E</span>
                                <span class="content_item_value">${(h=n.data.count)==null?void 0:h.normalNumber}</span>
                            </div>
                            <div class="map_tooltip_content_item">
                                <span class="content_item_point" style="color:#FF6132;">\u25CF</span>
                                <span class="content_item_name">\u7F3A\u9677\u6570\u636E</span>
                                <span class="content_item_value">${(F=n.data.count)==null?void 0:F.abnormalNumber}</span>
                            </div>
                        </div>
                    `},backgroundColor:"rgba(0, 0, 0, 0.65)",borderColor:"rgba(0, 0, 0, 0.65)"},geo:{map:u,zoom:1.1,roam:!0,label:{normal:{show:!0,color:"#ffffff",formatter:n=>{switch(n.name){case"\u5185\u8499\u53E4\u81EA\u6CBB\u533A":n.name="\u5185\u8499\u53E4";break;case"\u897F\u85CF\u81EA\u6CBB\u533A":n.name="\u897F\u85CF";break;case"\u65B0\u7586\u7EF4\u543E\u5C14\u81EA\u6CBB\u533A":n.name="\u65B0\u7586";break;case"\u5B81\u590F\u56DE\u65CF\u81EA\u6CBB\u533A":n.name="\u5B81\u590F";break;case"\u5E7F\u897F\u58EE\u65CF\u81EA\u6CBB\u533A":n.name="\u5E7F\u897F";break;case"\u9999\u6E2F\u7279\u522B\u884C\u653F\u533A":n.name="\u9999\u6E2F";break;case"\u6FB3\u95E8\u7279\u522B\u884C\u653F\u533A":n.name="\u6FB3\u95E8";break}return n.name}},emphasis:{show:!0,color:"#ffffff"}},itemStyle:{normal:{areaColor:"#24CFF4",borderColor:"#53D9FF",borderWidth:1.3,shadowBlur:15,shadowColor:"rgb(58,115,192)",shadowOffsetX:7,shadowOffsetY:6},emphasis:{areaColor:"#8dd7fc",borderWidth:1.6,shadowBlur:25}}},visualMap:{min:s,max:o,left:"1%",bottom:"10%",calculable:!0,seriesIndex:[0],inRange:{color:["#24CFF4","#2E98CA","#1E62AC"]},textStyle:{color:"#24CFF4"}},series:[{name:"\u5730\u56FE",type:"map",geoIndex:0,map:u,roam:!0,zoom:1.3,selectedMode:!1,data:t},{name:"\u6563\u70B9",type:"effectScatter",coordinateSystem:"geo",rippleEffect:{brushType:"fill"},itemStyle:{color(n){return n.value[2]>0?"#FF9700":"#1AFFBF"},shadowBlur:10,shadowColor:"#333"},data:e,symbolSize(){return 10},showEffectOn:"render"}]};c.setOption(B,!0),c.off("click"),c.on("click",C)}},C=t=>{if(r.enterMap.length<3){const{data:e}=t;r.enterMap.findIndex(o=>o.adcode===e.adcode)===-1&&(r.enterMap.push({name:e.name,adcode:e.adcode}),p(e.adcode))}},g=t=>{const e=r.enterMap.findIndex(s=>s.adcode===t);r.enterMap.length=e+1,p(t)},p=t=>{v(t).then(e=>{const s=e.features.map(o=>({name:o.properties.name,adcode:o.properties.adcode,center:o.properties.center,normalNumber:0,abnormalNumber:0}));X(s).then(o=>{const{code:a,data:c}=o;if(a===200){const{mapData:u}=c;r.mapData=u}r.geoJson=e,f()}).catch(()=>{r.geoJson=e,f()})})},f=()=>{let t=0,e=1;const s=[],o=[];r.mapData.forEach((a,c)=>{const u=a.normalNumber+a.abnormalNumber;c===0&&(t=u,e=u),u<t?t=u:u>e&&(e=u),s.push({name:a.name,value:u,adcode:a.adcode,count:{normalNumber:a.normalNumber,abnormalNumber:a.abnormalNumber}}),a.center&&o.push({name:a.name,value:[a.center[0],a.center[1],a.normalNumber],adcode:a.adcode})}),E(s,o,t,e)};return G(()=>{T(()=>{p(1e5)})}),V(()=>{d.echarts.forEach(t=>{t.dispose()})}),(t,e)=>(l(),m("div",Y,[b("div",q,[(l(!0),m(L,null,R(_(r).enterMap,(s,o)=>(l(),m("div",{class:"cursor-pointer text-size-18px font-700 text-[#000918] dark:text-[#666666]",key:s.adcode,onClick:a=>g(s.adcode)},[W(j(s.name)+" ",1),o!==_(r).enterMap.length-1?(l(),m("span",K," >> ")):U("",!0)],8,H))),128))]),P]))}});export{he as default};
