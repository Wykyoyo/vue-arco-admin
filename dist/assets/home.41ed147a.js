import{g}from"./utils.25ddbb72.js";import{a as B}from"./axios.d05e21a0.js";import{u as x,e as v,f as k,c as y,a as M,g as A,i as D,d as N,r as w}from"./echarts.7cf6b804.js";import{f as $,a as S,o as z,z as J,j as l,k as m,p as F,F as I,O,ac as f,y as G,L as T,t as V}from"./@vue.b44b92d2.js";import"./axios.b6599a80.js";import"./index.8383100e.js";import"./pinia.7e145a7d.js";import"./vue-router.f2cb4f5d.js";import"./@arco-design.bf2d84a3.js";import"./b-validate.79bb21bc.js";import"./lodash.isequal.2aa59b76.js";import"./resize-observer-polyfill.8deb1e21.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./number-precision.08b8c2db.js";import"./lodash-es.2f4ef74c.js";import"./mockjs.8476dd54.js";import"./tslib.60310f1a.js";import"./zrender.07183df1.js";const L=i=>B.post("/home/getMapData",i);const W={class:"h-full px-0 py-0"},j={class:"absolute flex z-2 px-10px py-10px"},R=["onClick"],X={key:0,class:"mx-4px"},Y=F("div",{id:"map_echar",class:"w-full h-full"},null,-1),ie=$({setup(i){x([v,k,y,M,A,D]);const s=S({geoJson:null,mapData:[],enterMap:[{name:"\u5168\u56FD",adcode:1e5}]}),_=(t,e,r,o)=>{const a=document.getElementById("map_echar");if(a){const c=N(a);w("map",s.geoJson);const u="map",C={grid:{left:"0%",top:"0%",right:"0%",bottom:"0%"},tooltip:{trigger:"item",formatter:n=>`
                        <div class="map_tooltip">
                            <div class="map_tooltip_content_item">
                                <span class="content_item_point" style="color:#1AFFBF;">\u25CF</span>
                                <span class="content_item_name">\u6B63\u5E38\u6570\u636E</span>
                                <span class="content_item_value">${n.data.count.normalNumber}</span>
                            </div>
                            <div class="map_tooltip_content_item">
                                <span class="content_item_point" style="color:#FF6132;">\u25CF</span>
                                <span class="content_item_name">\u7F3A\u9677\u6570\u636E</span>
                                <span class="content_item_value">${n.data.count.abnormalNumber}</span>
                            </div>
                        </div>
                    `,backgroundColor:"rgba(0, 0, 0, 0.65)",borderColor:"rgba(0, 0, 0, 0.65)"},geo:{map:u,zoom:1.1,roam:!0,label:{normal:{show:!0,color:"#ffffff",formatter:n=>{switch(n.name){case"\u5185\u8499\u53E4\u81EA\u6CBB\u533A":n.name="\u5185\u8499\u53E4";break;case"\u897F\u85CF\u81EA\u6CBB\u533A":n.name="\u897F\u85CF";break;case"\u65B0\u7586\u7EF4\u543E\u5C14\u81EA\u6CBB\u533A":n.name="\u65B0\u7586";break;case"\u5B81\u590F\u56DE\u65CF\u81EA\u6CBB\u533A":n.name="\u5B81\u590F";break;case"\u5E7F\u897F\u58EE\u65CF\u81EA\u6CBB\u533A":n.name="\u5E7F\u897F";break;case"\u9999\u6E2F\u7279\u522B\u884C\u653F\u533A":n.name="\u9999\u6E2F";break;case"\u6FB3\u95E8\u7279\u522B\u884C\u653F\u533A":n.name="\u6FB3\u95E8";break}return n.name}},emphasis:{show:!0,color:"#ffffff"}},itemStyle:{normal:{areaColor:"#24CFF4",borderColor:"#53D9FF",borderWidth:1.3,shadowBlur:15,shadowColor:"rgb(58,115,192)",shadowOffsetX:7,shadowOffsetY:6},emphasis:{areaColor:"#8dd7fc",borderWidth:1.6,shadowBlur:25}}},visualMap:{min:r,max:o,left:"1%",bottom:"10%",calculable:!0,seriesIndex:[0],inRange:{color:["#24CFF4","#2E98CA","#1E62AC"]},textStyle:{color:"#24CFF4"}},series:[{name:"\u5730\u56FE",type:"map",geoIndex:0,map:u,roam:!0,zoom:1.3,selectedMode:!1,data:t},{name:"\u6563\u70B9",type:"effectScatter",coordinateSystem:"geo",rippleEffect:{brushType:"fill"},itemStyle:{color(n){return n.value[2]>0?"#FF9700":"#1AFFBF"},shadowBlur:10,shadowColor:"#333"},data:e,symbolSize(){return 10},showEffectOn:"render"}]};c.setOption(C),c.off("click"),c.on("click",h)}},h=t=>{if(s.enterMap.length<3){const{data:e}=t;s.enterMap.findIndex(o=>o.adcode===e.adcode)===-1&&(s.enterMap.push({name:e.name,adcode:e.adcode}),p(e.adcode))}},b=t=>{const e=s.enterMap.findIndex(r=>r.adcode===t);s.enterMap.length=e+1,p(t)},p=t=>{g(t).then(e=>{const r=e.features.map(o=>({name:o.properties.name,adcode:o.properties.adcode,center:o.properties.center,normalNumber:0,abnormalNumber:0}));L(r).then(o=>{const{code:a,data:c}=o;if(a===200){const{mapData:u}=c;s.mapData=u}s.geoJson=e,d()}).catch(()=>{s.geoJson=e,d()})})},d=()=>{let t=0,e=1;const r=[],o=[];s.mapData.forEach((a,c)=>{const u=a.normalNumber+a.abnormalNumber;c===0&&(t=u,e=u),u<t?t=u:u>e&&(e=u),r.push({name:a.name,value:u,adcode:a.adcode,count:{normalNumber:a.normalNumber,abnormalNumber:a.abnormalNumber}}),a.center&&o.push({name:a.name,value:[a.center[0],a.center[1],a.normalNumber],adcode:a.adcode})}),_(r,o,t,e)};return z(()=>{J(()=>{p(1e5)})}),(t,e)=>(l(),m("div",W,[F("div",j,[(l(!0),m(I,null,O(f(s).enterMap,(r,o)=>(l(),m("div",{class:"cursor-pointer text-size-18px font-700 text-[#000918] dark:text-[#666666]",key:r.adcode,onClick:a=>b(r.adcode)},[G(T(r.name)+" ",1),o!==f(s).enterMap.length-1?(l(),m("span",X," >> ")):V("",!0)],8,R))),128))]),Y]))}});export{ie as default};
